(()=>{function t(e,n){let r,l,a,u,i;if(n>e.length||n<=0)return[];if(n==e.length)return[e];if(1==n){for(a=[],r=0;r<e.length;r++)a.push([e[r]]);return a}for(a=[],r=0;r<e.length-n+1;r++)for(u=e.slice(r,r+1),i=t(e.slice(r+1),n-1),l=0;l<i.length;l++)a.push(u.concat(i[l]));return a}function e(t){this.suit=Math.floor(t/13),this.value=Math.floor(t%13),this.string=["2","3","4","5","6","7","8","9","10","J","Q","K","A"][this.value]+""+["&clubs;","&diams;","&hearts;","&spades;"][this.suit]+" "}function n(t){this.fiveCards=t;let e=t.map((function(t){return t%13})),n=t.map((function(t){return Math.floor(t/13)}));this.isFlush=n.allValuesSame(),this.cardValueCount=[],this.addCards(e),this.uniqValues=this.cardValueCount.length,this.rank_int=this.rank()}function r(t,e){if(t.rank_int<e.rank_int)return-1;if(t.rank_int>e.rank_int)return 1;for(let n=0;n<t.cardValueCount.length;n++){if(t.cardValueCount[n][0]<e.cardValueCount[n][0])return 1;if(t.cardValueCount[n][0]>e.cardValueCount[n][0])return-1}return 3}Array.prototype.allValuesSame=function(){for(let t=1;t<this.length;t++)if(this[t]!==this[0])return!1;return!0},n.prototype.addCards=function(t){this_hand=this,t.forEach((function(t){let e=!1;for(let n in this_hand.cardValueCount)if(this_hand.cardValueCount[n][0]==t){this_hand.cardValueCount[n][1]+=1,e=!0;break}e||this_hand.cardValueCount.push([t,1])}))},n.prototype.rank=function(){return 5==this.uniqValues?this.checkSrtFls.call(this):this.checkPairs.call(this)},n.prototype.checkSrtFls=function(){let t=this.checkStraight.call(this);return this.isFlush&&t?9:this.isFlush?6:t?5:1},n.prototype.checkPairs=function(){return pair_count=this.cardValueCount[0][1],2===this.uniqValues?4==pair_count?8:7:3===this.uniqValues?3==pair_count?4:3:2},n.prototype.checkStraight=function(){return this.cardValueCount[0][0]-this.cardValueCount[4][0]==4},n.prototype.toString=function(){return this.fiveCards.map((function(t){return pokerCard=new e(t)," "+pokerCard.string})),["nil","High Card","Pair","Two pair","Three of a Kind","Straight","Flush","Full House","Four of a Kind","Straight Flush"][this.rank_int]};let l,a,u,i,o,s,c,h,d,m,p,f,y,g=[];function C(t,n){for(l=0;l<n.length;l++)if(null==n[l])t[l].innerHTML="&#10042";else{let r=new e(n[l]);t[l].innerHTML=r.string}}y=100,C(document.getElementsByClassName("card"),[null,null,null,null,null,null,null,null,null]);const V=document.getElementsByClassName("table-card"),k=document.getElementsByClassName("player-card"),_=document.getElementsByClassName("computer-card");$(document).on("click",".deal",(function(e){for(g=[];g.length<=8;){let t=Math.floor(52*Math.random());-1==g.indexOf(t)&&g.push(t)}a=[g.pop(),g.pop()],u=[g.pop(),g.pop()],p=a.concat(g),f=u.concat(g),i=t(p,5),o=t(f,5),s=i.map((function(t){return new n(t)})),c=o.map((function(t){return new n(t)})),h=s.sort(r)[0],d=c.sort(r)[0],C(V,[null,null,null,null,null]),C(k,a),C(_,[null,null]),document.getElementById("pregame-controls").style.display="none",document.getElementById("in-game-controls").style.display="flex",document.getElementById("player-message").innerHTML="Place Bet",document.getElementById("player-hand").innerHTML="",document.getElementById("computer-hand").innerHTML=""})),$(document).on("click",".bet, .raise, .allIn ",(function(t){if(y<=0)return alert("no more money. £100 has been added to your account"),y=100,void(document.getElementById("player-money").innerHTML="£"+y);let e=$(this).attr("class");var n;"bet"===e?my_bet=5:(e="raise")?my_bet=20:(e="allIn")&&(my_bet=y),C(V,g),C(_,u),document.getElementById("pregame-controls").style.display="flex",document.getElementById("in-game-controls").style.display="none",n=my_bet,document.getElementById("player-message").innerHTML=function(t){return m=r(h,d),1===m?(y+=t,"Player Wins"):-1===m?(y-=t,"Computer Wins"):"Tie"}(n),document.getElementById("player-hand").innerHTML="Player has: "+h.toString(),document.getElementById("computer-hand").innerHTML="Computer has: "+d.toString(),document.getElementById("player-money").innerHTML="£"+y}))})();